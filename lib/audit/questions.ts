// lib/audit/questions.ts
// Base de donn√©es des questions d'audit AI Act - 150+ questions intelligentes

export interface QuestionOption {
  label: string;
  value: string;
  score: number;
  riskLevel?: "low" | "medium" | "high" | "critical";
  triggerQuestions?: string[]; // IDs des questions √† afficher si cette option est choisie
}

export interface Question {
  id: string;
  category: string;
  subcategory: string;
  question: string;
  description?: string;
  type: "single" | "multiple" | "text" | "number" | "scale";
  options?: QuestionOption[];
  required: boolean;
  forPlans: ("starter" | "pro" | "enterprise")[];
  forSectors?: string[]; // Si vide = tous les secteurs
  forSizes?: string[]; // Si vide = toutes les tailles
  conditions?: { questionId: string; values: string[] }[]; // Afficher si ces conditions sont remplies
  weight: number; // Importance pour le score (1-10)
  aiActArticle?: string; // Article AI Act concern√©
  collectData?: string; // Nom du champ √† collecter pour templates
}

// Secteurs d'activit√©
export const SECTORS = [
  { id: "finance", name: "Finance / Banque / Assurance", highRisk: true },
  { id: "health", name: "Sant√© / M√©dical / Pharma", highRisk: true },
  { id: "hr", name: "Ressources Humaines / Recrutement", highRisk: true },
  { id: "legal", name: "Juridique / Justice", highRisk: true },
  { id: "education", name: "√âducation / Formation", highRisk: true },
  { id: "public", name: "Secteur Public / Administration", highRisk: true },
  { id: "retail", name: "Commerce / Retail / E-commerce", highRisk: false },
  { id: "industry", name: "Industrie / Manufacturing", highRisk: false },
  { id: "tech", name: "Tech / IT / Digital", highRisk: false },
  { id: "services", name: "Services aux entreprises", highRisk: false },
  { id: "transport", name: "Transport / Logistique", highRisk: false },
  { id: "energy", name: "√ânergie / Utilities", highRisk: false },
  { id: "media", name: "M√©dia / Communication / Marketing", highRisk: false },
  { id: "other", name: "Autre secteur", highRisk: false },
];

// Tailles d'entreprise
export const COMPANY_SIZES = [
  { id: "tpe", name: "TPE (1-10 salari√©s)", employees: "1-10" },
  { id: "pme", name: "PME (11-250 salari√©s)", employees: "11-250" },
  { id: "eti", name: "ETI (251-5000 salari√©s)", employees: "251-5000" },
  { id: "ge", name: "Grande Entreprise (5000+ salari√©s)", employees: "5000+" },
];

// Cat√©gories de questions
export const CATEGORIES = [
  {
    id: "company_profile",
    name: "Profil de l'entreprise",
    icon: "üè¢",
    color: "#00F5FF",
    description: "Informations g√©n√©rales sur votre organisation",
  },
  {
    id: "ai_inventory",
    name: "Inventaire des syst√®mes IA",
    icon: "üìã",
    color: "#8B5CF6",
    description: "Recensement de tous vos outils utilisant l'IA",
  },
  {
    id: "risk_classification",
    name: "Classification des risques",
    icon: "‚ö†Ô∏è",
    color: "#FF6B00",
    description: "√âvaluation du niveau de risque de vos syst√®mes",
  },
  {
    id: "governance",
    name: "Gouvernance IA",
    icon: "üèõÔ∏è",
    color: "#00FF88",
    description: "Organisation et politique d'utilisation de l'IA",
  },
  {
    id: "documentation",
    name: "Documentation technique",
    icon: "üìÑ",
    color: "#FFB800",
    description: "Tra√ßabilit√© et documentation des syst√®mes",
  },
  {
    id: "training",
    name: "Formation et comp√©tences",
    icon: "üéì",
    color: "#FF4444",
    description: "Niveau de connaissance de vos √©quipes",
  },
  {
    id: "data_management",
    name: "Gestion des donn√©es",
    icon: "üíæ",
    color: "#00B4D8",
    description: "Qualit√© et gouvernance des donn√©es IA",
  },
  {
    id: "transparency",
    name: "Transparence et information",
    icon: "üëÅÔ∏è",
    color: "#E040FB",
    description: "Communication sur l'utilisation de l'IA",
  },
  {
    id: "human_oversight",
    name: "Supervision humaine",
    icon: "üë§",
    color: "#FF7043",
    description: "Contr√¥le humain des d√©cisions IA",
  },
  {
    id: "security",
    name: "S√©curit√© et robustesse",
    icon: "üîí",
    color: "#26A69A",
    description: "Protection et fiabilit√© des syst√®mes",
  },
  {
    id: "compliance_process",
    name: "Processus de conformit√©",
    icon: "‚úÖ",
    color: "#66BB6A",
    description: "D√©marches et organisation pour la conformit√©",
  },
  {
    id: "suppliers",
    name: "Fournisseurs et sous-traitants",
    icon: "ü§ù",
    color: "#AB47BC",
    description: "Gestion des prestataires IA",
  },
];

// Les 150+ questions
export const QUESTIONS: Question[] = [
  // ============================================
  // PROFIL ENTREPRISE (10 questions)
  // ============================================
  {
    id: "company_name",
    category: "company_profile",
    subcategory: "Identification",
    question: "Quel est le nom de votre entreprise ?",
    type: "text",
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 1,
    collectData: "companyName",
  },
  {
    id: "company_sector",
    category: "company_profile",
    subcategory: "Identification",
    question: "Dans quel secteur d'activit√© exercez-vous ?",
    description: "Cette information permet d'adapter les questions √† votre contexte r√©glementaire sp√©cifique.",
    type: "single",
    options: SECTORS.map(s => ({ label: s.name, value: s.id, score: s.highRisk ? 2 : 0 })),
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 8,
    collectData: "sector",
  },
  {
    id: "company_size",
    category: "company_profile",
    subcategory: "Identification",
    question: "Quelle est la taille de votre entreprise ?",
    type: "single",
    options: COMPANY_SIZES.map(s => ({ label: s.name, value: s.id, score: 0 })),
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 5,
    collectData: "companySize",
  },
  {
    id: "company_revenue",
    category: "company_profile",
    subcategory: "Identification",
    question: "Quel est votre chiffre d'affaires annuel approximatif ?",
    type: "single",
    options: [
      { label: "Moins de 1M‚Ç¨", value: "under_1m", score: 0 },
      { label: "1M‚Ç¨ - 10M‚Ç¨", value: "1m_10m", score: 0 },
      { label: "10M‚Ç¨ - 50M‚Ç¨", value: "10m_50m", score: 1 },
      { label: "50M‚Ç¨ - 250M‚Ç¨", value: "50m_250m", score: 2 },
      { label: "Plus de 250M‚Ç¨", value: "over_250m", score: 3 },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 3,
    collectData: "revenue",
  },
  {
    id: "company_international",
    category: "company_profile",
    subcategory: "Identification",
    question: "Avez-vous des activit√©s dans plusieurs pays de l'UE ?",
    type: "single",
    options: [
      { label: "Non, uniquement en France", value: "france_only", score: 0 },
      { label: "Oui, dans 2-5 pays", value: "few_countries", score: 1 },
      { label: "Oui, dans plus de 5 pays", value: "many_countries", score: 2 },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 4,
    collectData: "international",
  },
  {
    id: "company_b2b_b2c",
    category: "company_profile",
    subcategory: "Activit√©",
    question: "Votre activit√© est principalement :",
    type: "single",
    options: [
      { label: "B2B (clients professionnels)", value: "b2b", score: 0 },
      { label: "B2C (clients particuliers)", value: "b2c", score: 2 },
      { label: "Les deux", value: "both", score: 1 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 5,
  },
  {
    id: "company_regulated",
    category: "company_profile",
    subcategory: "Activit√©",
    question: "√ätes-vous soumis √† des r√©glementations sectorielles sp√©cifiques ?",
    description: "Ex: RGPD renforc√© sant√©, r√©glementation bancaire, etc.",
    type: "multiple",
    options: [
      { label: "R√©glementation bancaire (DSP2, B√¢le III...)", value: "banking", score: 2 },
      { label: "R√©glementation sant√© (HDS, RGPD sant√©...)", value: "health", score: 2 },
      { label: "R√©glementation assurance (Solvabilit√© II...)", value: "insurance", score: 2 },
      { label: "RGPD classique uniquement", value: "gdpr_only", score: 1 },
      { label: "Aucune r√©glementation sp√©cifique", value: "none", score: 0 },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 6,
  },
  {
    id: "company_dpo",
    category: "company_profile",
    subcategory: "Organisation",
    question: "Avez-vous un DPO (D√©l√©gu√© √† la Protection des Donn√©es) ?",
    type: "single",
    options: [
      { label: "Oui, en interne", value: "internal", score: 0 },
      { label: "Oui, externalis√©", value: "external", score: 1 },
      { label: "Non", value: "no", score: 3 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 6,
  },
  {
    id: "company_it_team",
    category: "company_profile",
    subcategory: "Organisation",
    question: "Disposez-vous d'une √©quipe IT/DSI en interne ?",
    type: "single",
    options: [
      { label: "Oui, √©quipe d√©di√©e (5+ personnes)", value: "large_team", score: 0 },
      { label: "Oui, petite √©quipe (1-4 personnes)", value: "small_team", score: 1 },
      { label: "Non, tout est externalis√©", value: "outsourced", score: 2 },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 4,
  },
  {
    id: "company_ai_budget",
    category: "company_profile",
    subcategory: "Organisation",
    question: "Quel budget annuel consacrez-vous aux outils num√©riques/IA ?",
    type: "single",
    options: [
      { label: "Moins de 10 000‚Ç¨", value: "under_10k", score: 0 },
      { label: "10 000‚Ç¨ - 50 000‚Ç¨", value: "10k_50k", score: 0 },
      { label: "50 000‚Ç¨ - 200 000‚Ç¨", value: "50k_200k", score: 1 },
      { label: "Plus de 200 000‚Ç¨", value: "over_200k", score: 2 },
    ],
    required: false,
    forPlans: ["enterprise"],
    weight: 3,
  },

  // ============================================
  // INVENTAIRE IA (25 questions)
  // ============================================
  {
    id: "ai_inventory_exists",
    category: "ai_inventory",
    subcategory: "Recensement",
    question: "Avez-vous r√©alis√© un inventaire de tous les syst√®mes d'IA utilis√©s dans votre entreprise ?",
    type: "single",
    options: [
      { label: "Oui, inventaire complet et √† jour", value: "complete", score: 0 },
      { label: "Oui, mais partiel ou pas √† jour", value: "partial", score: 2 },
      { label: "Non, pas d'inventaire", value: "no", score: 4 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 9,
    aiActArticle: "Article 6 - Classification",
  },
  {
    id: "ai_count",
    category: "ai_inventory",
    subcategory: "Recensement",
    question: "Combien de syst√®mes ou outils utilisant l'IA sont utilis√©s dans votre entreprise ?",
    type: "single",
    options: [
      { label: "1-5 syst√®mes", value: "1_5", score: 0 },
      { label: "6-15 syst√®mes", value: "6_15", score: 1 },
      { label: "16-50 syst√®mes", value: "16_50", score: 2 },
      { label: "Plus de 50 syst√®mes", value: "50_plus", score: 3 },
      { label: "Je ne sais pas", value: "unknown", score: 4 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 7,
    collectData: "aiSystemsCount",
  },
  {
    id: "ai_genai_usage",
    category: "ai_inventory",
    subcategory: "IA G√©n√©rative",
    question: "Utilisez-vous des outils d'IA g√©n√©rative (ChatGPT, Claude, Copilot, Midjourney...) ?",
    type: "single",
    options: [
      { label: "Non, pas d'IA g√©n√©rative", value: "no", score: 0 },
      { label: "Oui, avec une politique encadr√©e", value: "yes_policy", score: 1 },
      { label: "Oui, usage libre sans encadrement", value: "yes_free", score: 3 },
      { label: "Je ne sais pas", value: "unknown", score: 4 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 8,
    aiActArticle: "Article 50 - Transparence GPAI",
  },
  {
    id: "ai_genai_list",
    category: "ai_inventory",
    subcategory: "IA G√©n√©rative",
    question: "Quels outils d'IA g√©n√©rative utilisez-vous ?",
    description: "S√©lectionnez tous les outils utilis√©s dans votre organisation.",
    type: "multiple",
    options: [
      { label: "ChatGPT / OpenAI", value: "chatgpt", score: 1 },
      { label: "Claude / Anthropic", value: "claude", score: 1 },
      { label: "Microsoft Copilot", value: "copilot", score: 1 },
      { label: "Google Gemini / Bard", value: "gemini", score: 1 },
      { label: "Midjourney / DALL-E (images)", value: "image_gen", score: 1 },
      { label: "GitHub Copilot (code)", value: "github_copilot", score: 1 },
      { label: "Autres outils IA g√©n√©rative", value: "other", score: 1 },
      { label: "Aucun", value: "none", score: 0 },
    ],
    required: false,
    forPlans: ["starter", "pro", "enterprise"],
    conditions: [{ questionId: "ai_genai_usage", values: ["yes_policy", "yes_free"] }],
    weight: 5,
    collectData: "genAITools",
  },
  {
    id: "ai_hr_recruitment",
    category: "ai_inventory",
    subcategory: "IA RH",
    question: "Utilisez-vous l'IA dans vos processus RH ou de recrutement ?",
    type: "single",
    options: [
      { label: "Non", value: "no", score: 0 },
      { label: "Oui, pour le tri de CV", value: "cv_screening", score: 3, riskLevel: "high" },
      { label: "Oui, pour les entretiens vid√©o analys√©s", value: "video_interview", score: 4, riskLevel: "critical" },
      { label: "Oui, pour l'√©valuation des performances", value: "performance", score: 3, riskLevel: "high" },
      { label: "Oui, plusieurs usages RH", value: "multiple", score: 4, riskLevel: "critical" },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 10,
    aiActArticle: "Annexe III - Syst√®mes √† haut risque",
  },
  {
    id: "ai_hr_details",
    category: "ai_inventory",
    subcategory: "IA RH",
    question: "Pr√©cisez les outils IA utilis√©s dans vos processus RH :",
    type: "multiple",
    options: [
      { label: "ATS avec IA (tri automatique de CV)", value: "ats", score: 2 },
      { label: "Analyse vid√©o des entretiens", value: "video_analysis", score: 3 },
      { label: "Chatbot recrutement", value: "chatbot", score: 1 },
      { label: "Matching candidat/poste automatis√©", value: "matching", score: 2 },
      { label: "√âvaluation des soft skills par IA", value: "soft_skills", score: 3 },
      { label: "Pr√©diction de turnover", value: "turnover", score: 2 },
    ],
    required: false,
    forPlans: ["pro", "enterprise"],
    conditions: [{ questionId: "ai_hr_recruitment", values: ["cv_screening", "video_interview", "performance", "multiple"] }],
    weight: 8,
    collectData: "hrAITools",
  },
  {
    id: "ai_credit_scoring",
    category: "ai_inventory",
    subcategory: "IA Finance",
    question: "Utilisez-vous l'IA pour l'√©valuation de solvabilit√© ou le scoring cr√©dit ?",
    type: "single",
    options: [
      { label: "Non", value: "no", score: 0 },
      { label: "Oui, pour les particuliers", value: "individuals", score: 4, riskLevel: "critical" },
      { label: "Oui, pour les entreprises", value: "businesses", score: 3, riskLevel: "high" },
      { label: "Oui, les deux", value: "both", score: 4, riskLevel: "critical" },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    forSectors: ["finance"],
    weight: 10,
    aiActArticle: "Annexe III - 5(b)",
  },
  {
    id: "ai_biometric",
    category: "ai_inventory",
    subcategory: "Biom√©trie",
    question: "Utilisez-vous des syst√®mes de reconnaissance biom√©trique (faciale, vocale, etc.) ?",
    type: "single",
    options: [
      { label: "Non", value: "no", score: 0 },
      { label: "Oui, pour le contr√¥le d'acc√®s interne", value: "access_control", score: 2 },
      { label: "Oui, pour l'identification de clients/utilisateurs", value: "client_id", score: 4, riskLevel: "critical" },
      { label: "Oui, pour la surveillance", value: "surveillance", score: 5, riskLevel: "critical" },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 10,
    aiActArticle: "Article 5 - Pratiques interdites",
  },
  {
    id: "ai_customer_service",
    category: "ai_inventory",
    subcategory: "Relation client",
    question: "Utilisez-vous l'IA dans votre relation client ?",
    type: "multiple",
    options: [
      { label: "Chatbot / assistant virtuel", value: "chatbot", score: 1 },
      { label: "Analyse de sentiment des avis", value: "sentiment", score: 1 },
      { label: "Recommandation de produits personnalis√©e", value: "recommendation", score: 1 },
      { label: "Routage intelligent des demandes", value: "routing", score: 1 },
      { label: "Analyse pr√©dictive du churn", value: "churn", score: 2 },
      { label: "Personnalisation des prix", value: "pricing", score: 3, riskLevel: "high" },
      { label: "Aucun de ces usages", value: "none", score: 0 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 6,
    collectData: "customerAI",
  },
  {
    id: "ai_marketing",
    category: "ai_inventory",
    subcategory: "Marketing",
    question: "Utilisez-vous l'IA dans vos activit√©s marketing ?",
    type: "multiple",
    options: [
      { label: "G√©n√©ration de contenu (textes, images)", value: "content_gen", score: 1 },
      { label: "Ciblage publicitaire automatis√©", value: "ad_targeting", score: 2 },
      { label: "Scoring et segmentation clients", value: "scoring", score: 2 },
      { label: "A/B testing automatis√©", value: "ab_testing", score: 1 },
      { label: "Personnalisation email/web", value: "personalization", score: 1 },
      { label: "Analyse pr√©dictive marketing", value: "predictive", score: 2 },
      { label: "Aucun de ces usages", value: "none", score: 0 },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 5,
    collectData: "marketingAI",
  },
  {
    id: "ai_operations",
    category: "ai_inventory",
    subcategory: "Op√©rations",
    question: "Utilisez-vous l'IA dans vos op√©rations ?",
    type: "multiple",
    options: [
      { label: "Pr√©vision de la demande", value: "demand_forecast", score: 1 },
      { label: "Optimisation de la supply chain", value: "supply_chain", score: 1 },
      { label: "Maintenance pr√©dictive", value: "maintenance", score: 1 },
      { label: "Contr√¥le qualit√© automatis√©", value: "quality", score: 2 },
      { label: "Automatisation de processus (RPA)", value: "rpa", score: 1 },
      { label: "V√©hicules/drones autonomes", value: "autonomous", score: 3, riskLevel: "high" },
      { label: "Aucun de ces usages", value: "none", score: 0 },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 5,
    collectData: "operationsAI",
  },
  {
    id: "ai_health_usage",
    category: "ai_inventory",
    subcategory: "IA Sant√©",
    question: "Utilisez-vous l'IA dans un contexte m√©dical ou de sant√© ?",
    type: "single",
    options: [
      { label: "Non", value: "no", score: 0 },
      { label: "Oui, aide au diagnostic", value: "diagnosis", score: 4, riskLevel: "critical" },
      { label: "Oui, analyse d'imagerie m√©dicale", value: "imaging", score: 4, riskLevel: "critical" },
      { label: "Oui, suivi patient / objets connect√©s", value: "monitoring", score: 3, riskLevel: "high" },
      { label: "Oui, autre usage m√©dical", value: "other", score: 3, riskLevel: "high" },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    forSectors: ["health"],
    weight: 10,
    aiActArticle: "Annexe III - 5(a)",
  },
  {
    id: "ai_decision_automation",
    category: "ai_inventory",
    subcategory: "D√©cisions automatis√©es",
    question: "Avez-vous des syst√®mes IA qui prennent des d√©cisions automatis√©es impactant des personnes ?",
    description: "D√©cisions sans intervention humaine ayant des effets juridiques ou significatifs.",
    type: "single",
    options: [
      { label: "Non, toutes les d√©cisions sont valid√©es par un humain", value: "no", score: 0 },
      { label: "Oui, pour des d√©cisions mineures", value: "minor", score: 2 },
      { label: "Oui, pour des d√©cisions significatives", value: "significant", score: 4, riskLevel: "high" },
      { label: "Je ne suis pas s√ªr", value: "unsure", score: 3 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 9,
    aiActArticle: "Article 14 - Contr√¥le humain",
  },
  {
    id: "ai_third_party",
    category: "ai_inventory",
    subcategory: "Provenance",
    question: "Vos syst√®mes IA sont principalement :",
    type: "single",
    options: [
      { label: "D√©velopp√©s en interne", value: "internal", score: 2 },
      { label: "Achet√©s/lou√©s √† des √©diteurs", value: "vendor", score: 1 },
      { label: "Open source", value: "opensource", score: 2 },
      { label: "Mix des trois", value: "mixed", score: 2 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 5,
    collectData: "aiProvenance",
  },
  {
    id: "ai_custom_models",
    category: "ai_inventory",
    subcategory: "D√©veloppement",
    question: "D√©veloppez-vous ou entra√Ænez-vous vos propres mod√®les d'IA ?",
    type: "single",
    options: [
      { label: "Non, nous utilisons uniquement des solutions cl√© en main", value: "no", score: 0 },
      { label: "Oui, nous fine-tunons des mod√®les existants", value: "finetune", score: 2 },
      { label: "Oui, nous d√©veloppons des mod√®les from scratch", value: "custom", score: 3 },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 6,
    aiActArticle: "Article 16 - Obligations fournisseurs",
  },

  // ============================================
  // CLASSIFICATION DES RISQUES (20 questions)
  // ============================================
  {
    id: "risk_classification_done",
    category: "risk_classification",
    subcategory: "Analyse",
    question: "Avez-vous classifi√© vos syst√®mes IA selon les 4 niveaux de risque de l'AI Act ?",
    description: "Inacceptable, Haut risque, Risque limit√©, Risque minimal",
    type: "single",
    options: [
      { label: "Oui, classification compl√®te", value: "complete", score: 0 },
      { label: "En cours de r√©alisation", value: "in_progress", score: 2 },
      { label: "Non, pas encore fait", value: "no", score: 4 },
      { label: "Je ne connais pas cette classification", value: "unknown", score: 5 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 10,
    aiActArticle: "Article 6 - Classification",
  },
  {
    id: "risk_prohibited_check",
    category: "risk_classification",
    subcategory: "Pratiques interdites",
    question: "Avez-vous v√©rifi√© qu'aucun de vos syst√®mes n'utilise de pratiques interdites ?",
    description: "Manipulation subliminale, exploitation de vuln√©rabilit√©s, scoring social, reconnaissance faciale en temps r√©el dans l'espace public...",
    type: "single",
    options: [
      { label: "Oui, v√©rification formelle r√©alis√©e", value: "verified", score: 0 },
      { label: "Oui, v√©rification informelle", value: "informal", score: 2 },
      { label: "Non, pas v√©rifi√©", value: "no", score: 4 },
      { label: "Je ne connais pas les pratiques interdites", value: "unknown", score: 5 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 10,
    aiActArticle: "Article 5 - Pratiques interdites",
  },
  {
    id: "risk_social_scoring",
    category: "risk_classification",
    subcategory: "Pratiques interdites",
    question: "Utilisez-vous un syst√®me de notation sociale des personnes bas√© sur leur comportement ?",
    type: "single",
    options: [
      { label: "Non, absolument pas", value: "no", score: 0 },
      { label: "Nous avons un syst√®me de fid√©lit√©/points", value: "loyalty", score: 1 },
      { label: "Nous notons les comportements pour prendre des d√©cisions", value: "yes", score: 5, riskLevel: "critical" },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 10,
    aiActArticle: "Article 5(1)(c)",
  },
  {
    id: "risk_emotion_recognition",
    category: "risk_classification",
    subcategory: "Pratiques interdites",
    question: "Utilisez-vous la reconnaissance des √©motions ?",
    type: "single",
    options: [
      { label: "Non", value: "no", score: 0 },
      { label: "Oui, en contexte professionnel (RH, entretiens)", value: "workplace", score: 5, riskLevel: "critical" },
      { label: "Oui, en contexte √©ducatif", value: "education", score: 5, riskLevel: "critical" },
      { label: "Oui, pour l'analyse marketing", value: "marketing", score: 3, riskLevel: "high" },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 10,
    aiActArticle: "Article 5(1)(f)",
  },
  {
    id: "risk_high_risk_count",
    category: "risk_classification",
    subcategory: "Haut risque",
    question: "Combien de syst√®mes √† haut risque avez-vous identifi√©s ?",
    type: "single",
    options: [
      { label: "Aucun", value: "0", score: 0 },
      { label: "1-2 syst√®mes", value: "1_2", score: 2 },
      { label: "3-5 syst√®mes", value: "3_5", score: 3 },
      { label: "Plus de 5 syst√®mes", value: "5_plus", score: 4 },
      { label: "Je ne sais pas", value: "unknown", score: 4 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 8,
    collectData: "highRiskCount",
  },
  {
    id: "risk_critical_infrastructure",
    category: "risk_classification",
    subcategory: "Haut risque",
    question: "Vos syst√®mes IA interagissent-ils avec des infrastructures critiques ?",
    description: "√ânergie, eau, transports, t√©l√©communications, sant√©...",
    type: "single",
    options: [
      { label: "Non", value: "no", score: 0 },
      { label: "Oui, de mani√®re p√©riph√©rique", value: "peripheral", score: 2 },
      { label: "Oui, de mani√®re centrale", value: "central", score: 4, riskLevel: "high" },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 8,
    aiActArticle: "Annexe III - 2",
  },
  {
    id: "risk_education_ai",
    category: "risk_classification",
    subcategory: "Haut risque",
    question: "Utilisez-vous l'IA dans l'√©ducation ou la formation professionnelle ?",
    type: "single",
    options: [
      { label: "Non", value: "no", score: 0 },
      { label: "Oui, pour l'administration (planning, etc.)", value: "admin", score: 1 },
      { label: "Oui, pour l'√©valuation des apprenants", value: "assessment", score: 4, riskLevel: "high" },
      { label: "Oui, pour l'orientation/admission", value: "admission", score: 4, riskLevel: "high" },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    forSectors: ["education"],
    weight: 8,
    aiActArticle: "Annexe III - 3",
  },
  {
    id: "risk_law_enforcement",
    category: "risk_classification",
    subcategory: "Haut risque",
    question: "Fournissez-vous des syst√®mes IA aux forces de l'ordre ou √† la justice ?",
    type: "single",
    options: [
      { label: "Non", value: "no", score: 0 },
      { label: "Oui", value: "yes", score: 5, riskLevel: "critical" },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 10,
    aiActArticle: "Annexe III - 6, 7, 8",
  },
  {
    id: "risk_fundamental_rights",
    category: "risk_classification",
    subcategory: "Impact",
    question: "Vos syst√®mes IA peuvent-ils impacter les droits fondamentaux des personnes ?",
    description: "Droit au travail, √† la sant√©, √† l'√©ducation, non-discrimination...",
    type: "single",
    options: [
      { label: "Non, impact minimal", value: "minimal", score: 0 },
      { label: "Impact possible mais limit√©", value: "limited", score: 2 },
      { label: "Impact significatif possible", value: "significant", score: 4, riskLevel: "high" },
      { label: "Je ne sais pas √©valuer", value: "unknown", score: 3 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 9,
    aiActArticle: "Article 27 - FRIA",
  },
  {
    id: "risk_fria_done",
    category: "risk_classification",
    subcategory: "Impact",
    question: "Avez-vous r√©alis√© une analyse d'impact sur les droits fondamentaux (FRIA) ?",
    type: "single",
    options: [
      { label: "Oui, pour tous les syst√®mes √† haut risque", value: "complete", score: 0 },
      { label: "Oui, pour certains syst√®mes", value: "partial", score: 2 },
      { label: "Non, mais pr√©vu", value: "planned", score: 3 },
      { label: "Non", value: "no", score: 4 },
      { label: "Je ne connais pas le FRIA", value: "unknown", score: 4 },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 8,
    aiActArticle: "Article 27",
  },

  // ============================================
  // GOUVERNANCE (20 questions)
  // ============================================
  {
    id: "gov_ai_referent",
    category: "governance",
    subcategory: "Organisation",
    question: "Avez-vous d√©sign√© un r√©f√©rent IA ou responsable de la conformit√© AI Act ?",
    type: "single",
    options: [
      { label: "Oui, poste d√©di√© √† temps plein", value: "fulltime", score: 0 },
      { label: "Oui, responsabilit√© partag√©e avec d'autres fonctions", value: "shared", score: 1 },
      { label: "Non, mais pr√©vu", value: "planned", score: 2 },
      { label: "Non", value: "no", score: 4 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 8,
    collectData: "hasAIReferent",
  },
  {
    id: "gov_ai_referent_level",
    category: "governance",
    subcategory: "Organisation",
    question: "√Ä quel niveau hi√©rarchique est rattach√© le r√©f√©rent IA ?",
    type: "single",
    options: [
      { label: "Direction g√©n√©rale / COMEX", value: "executive", score: 0 },
      { label: "Direction (DSI, DRH, Juridique...)", value: "director", score: 1 },
      { label: "Management interm√©diaire", value: "middle", score: 2 },
      { label: "Pas de r√©f√©rent d√©sign√©", value: "none", score: 3 },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    conditions: [{ questionId: "gov_ai_referent", values: ["fulltime", "shared"] }],
    weight: 5,
  },
  {
    id: "gov_ai_committee",
    category: "governance",
    subcategory: "Organisation",
    question: "Existe-t-il un comit√© ou une instance de gouvernance IA ?",
    type: "single",
    options: [
      { label: "Oui, comit√© d√©di√© avec r√©unions r√©guli√®res", value: "dedicated", score: 0 },
      { label: "Oui, trait√© dans un comit√© existant (comit√© data, risques...)", value: "existing", score: 1 },
      { label: "Non, mais pr√©vu", value: "planned", score: 2 },
      { label: "Non", value: "no", score: 3 },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 6,
  },
  {
    id: "gov_ai_policy",
    category: "governance",
    subcategory: "Politique",
    question: "Avez-vous une politique d'utilisation de l'IA formalis√©e ?",
    type: "single",
    options: [
      { label: "Oui, valid√©e et diffus√©e √† tous", value: "complete", score: 0 },
      { label: "Oui, mais pas encore diffus√©e", value: "draft", score: 1 },
      { label: "En cours de r√©daction", value: "in_progress", score: 2 },
      { label: "Non", value: "no", score: 4 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 8,
    collectData: "hasAIPolicy",
  },
  {
    id: "gov_policy_content",
    category: "governance",
    subcategory: "Politique",
    question: "Que couvre votre politique IA ?",
    type: "multiple",
    options: [
      { label: "Usages autoris√©s / interdits", value: "usage_rules", score: 0 },
      { label: "Processus de validation des nouveaux outils", value: "validation", score: 0 },
      { label: "Confidentialit√© et donn√©es", value: "confidentiality", score: 0 },
      { label: "R√¥les et responsabilit√©s", value: "roles", score: 0 },
      { label: "Gestion des incidents", value: "incidents", score: 0 },
      { label: "Formation obligatoire", value: "training", score: 0 },
    ],
    required: false,
    forPlans: ["pro", "enterprise"],
    conditions: [{ questionId: "gov_ai_policy", values: ["complete", "draft"] }],
    weight: 5,
    collectData: "policyContent",
  },
  {
    id: "gov_new_tool_process",
    category: "governance",
    subcategory: "Processus",
    question: "Existe-t-il un processus formel pour l'adoption de nouveaux outils IA ?",
    type: "single",
    options: [
      { label: "Oui, processus document√© avec validation multi-niveaux", value: "formal", score: 0 },
      { label: "Oui, processus informel", value: "informal", score: 2 },
      { label: "Non, adoption libre par les √©quipes", value: "free", score: 4 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 7,
  },
  {
    id: "gov_shadow_ai",
    category: "governance",
    subcategory: "Processus",
    question: "Ma√Ætrisez-vous le 'Shadow AI' (usage non autoris√© d'IA par les collaborateurs) ?",
    type: "single",
    options: [
      { label: "Oui, surveillance et blocage des outils non autoris√©s", value: "controlled", score: 0 },
      { label: "Oui, sensibilisation mais pas de blocage technique", value: "awareness", score: 2 },
      { label: "Non, nous n'avons pas de visibilit√©", value: "no_visibility", score: 4 },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 7,
  },
  {
    id: "gov_board_involvement",
    category: "governance",
    subcategory: "Direction",
    question: "La direction g√©n√©rale est-elle impliqu√©e dans la strat√©gie IA ?",
    type: "single",
    options: [
      { label: "Oui, sujet r√©gulier en COMEX/CODIR", value: "regular", score: 0 },
      { label: "Oui, ponctuellement", value: "occasional", score: 1 },
      { label: "Non, d√©l√©gu√© aux √©quipes op√©rationnelles", value: "delegated", score: 2 },
      { label: "Non, pas de strat√©gie IA d√©finie", value: "no_strategy", score: 3 },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 5,
  },
  {
    id: "gov_budget_compliance",
    category: "governance",
    subcategory: "Budget",
    question: "Avez-vous allou√© un budget sp√©cifique pour la conformit√© AI Act ?",
    type: "single",
    options: [
      { label: "Oui, budget d√©di√©", value: "dedicated", score: 0 },
      { label: "Oui, inclus dans le budget IT/juridique", value: "included", score: 1 },
      { label: "Non, pas de budget pr√©vu", value: "no", score: 3 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 6,
    collectData: "complianceBudget",
  },
  {
    id: "gov_kpis",
    category: "governance",
    subcategory: "Suivi",
    question: "Avez-vous d√©fini des indicateurs (KPIs) pour suivre l'utilisation et la performance de vos IA ?",
    type: "single",
    options: [
      { label: "Oui, tableau de bord avec suivi r√©gulier", value: "dashboard", score: 0 },
      { label: "Oui, quelques indicateurs suivis ponctuellement", value: "partial", score: 2 },
      { label: "Non", value: "no", score: 3 },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 5,
  },

  // ============================================
  // DOCUMENTATION (15 questions)
  // ============================================
  {
    id: "doc_technical_exists",
    category: "documentation",
    subcategory: "Documentation technique",
    question: "Disposez-vous d'une documentation technique pour vos syst√®mes IA √† haut risque ?",
    type: "single",
    options: [
      { label: "Oui, documentation compl√®te et √† jour", value: "complete", score: 0 },
      { label: "Oui, documentation partielle", value: "partial", score: 2 },
      { label: "Non, mais nous avons la documentation fournisseur", value: "vendor_only", score: 3 },
      { label: "Non", value: "no", score: 4 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 8,
    aiActArticle: "Article 11 - Documentation technique",
  },
  {
    id: "doc_content",
    category: "documentation",
    subcategory: "Documentation technique",
    question: "Votre documentation technique inclut-elle :",
    type: "multiple",
    options: [
      { label: "Description g√©n√©rale du syst√®me", value: "description", score: 0 },
      { label: "Sp√©cifications de conception", value: "design_specs", score: 0 },
      { label: "Description des donn√©es d'entra√Ænement", value: "training_data", score: 0 },
      { label: "M√©triques de performance", value: "metrics", score: 0 },
      { label: "Instructions d'utilisation", value: "instructions", score: 0 },
      { label: "Mesures de gestion des risques", value: "risk_measures", score: 0 },
    ],
    required: false,
    forPlans: ["pro", "enterprise"],
    weight: 6,
  },
  {
    id: "doc_logs",
    category: "documentation",
    subcategory: "Tra√ßabilit√©",
    question: "Conservez-vous les logs de fonctionnement de vos syst√®mes IA ?",
    type: "single",
    options: [
      { label: "Oui, conservation conforme (minimum 6 mois)", value: "compliant", score: 0 },
      { label: "Oui, mais dur√©e insuffisante", value: "short_term", score: 2 },
      { label: "Partiellement (certains syst√®mes)", value: "partial", score: 3 },
      { label: "Non", value: "no", score: 4 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 8,
    aiActArticle: "Article 12 - Tenue de registres",
  },
  {
    id: "doc_logs_content",
    category: "documentation",
    subcategory: "Tra√ßabilit√©",
    question: "Que contiennent vos logs ?",
    type: "multiple",
    options: [
      { label: "Horodatage des op√©rations", value: "timestamp", score: 0 },
      { label: "Donn√©es d'entr√©e", value: "input", score: 0 },
      { label: "R√©sultats/d√©cisions", value: "output", score: 0 },
      { label: "Identifiant utilisateur", value: "user_id", score: 0 },
      { label: "Versions du mod√®le", value: "model_version", score: 0 },
    ],
    required: false,
    forPlans: ["pro", "enterprise"],
    conditions: [{ questionId: "doc_logs", values: ["compliant", "short_term", "partial"] }],
    weight: 5,
  },
  {
    id: "doc_training_data",
    category: "documentation",
    subcategory: "Donn√©es",
    question: "Avez-vous document√© les donn√©es utilis√©es pour entra√Æner vos mod√®les IA ?",
    type: "single",
    options: [
      { label: "Oui, documentation compl√®te (source, qualit√©, biais)", value: "complete", score: 0 },
      { label: "Oui, documentation basique", value: "basic", score: 2 },
      { label: "Non applicable (mod√®les pr√©-entra√Æn√©s)", value: "not_applicable", score: 1 },
      { label: "Non", value: "no", score: 4 },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 7,
    aiActArticle: "Article 10 - Donn√©es",
  },
  {
    id: "doc_bias_analysis",
    category: "documentation",
    subcategory: "Donn√©es",
    question: "Avez-vous analys√© et document√© les biais potentiels de vos syst√®mes IA ?",
    type: "single",
    options: [
      { label: "Oui, analyse formelle avec mesures correctives", value: "formal", score: 0 },
      { label: "Oui, analyse informelle", value: "informal", score: 2 },
      { label: "Non, mais pr√©vu", value: "planned", score: 3 },
      { label: "Non", value: "no", score: 4 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 8,
    aiActArticle: "Article 10(2)(f)",
  },
  {
    id: "doc_version_control",
    category: "documentation",
    subcategory: "Gestion",
    question: "Avez-vous un syst√®me de gestion des versions pour vos mod√®les IA ?",
    type: "single",
    options: [
      { label: "Oui, versionning formel avec historique", value: "formal", score: 0 },
      { label: "Oui, basique", value: "basic", score: 1 },
      { label: "Non", value: "no", score: 3 },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 5,
  },
  {
    id: "doc_update_process",
    category: "documentation",
    subcategory: "Gestion",
    question: "Avez-vous un processus de mise √† jour de la documentation ?",
    type: "single",
    options: [
      { label: "Oui, mise √† jour syst√©matique √† chaque changement", value: "systematic", score: 0 },
      { label: "Oui, mises √† jour p√©riodiques", value: "periodic", score: 1 },
      { label: "Non, mises √† jour ad hoc", value: "adhoc", score: 3 },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 4,
  },

  // ============================================
  // FORMATION (15 questions)
  // ============================================
  {
    id: "training_ai_act_awareness",
    category: "training",
    subcategory: "Sensibilisation",
    question: "Vos collaborateurs sont-ils sensibilis√©s √† l'AI Act ?",
    type: "single",
    options: [
      { label: "Oui, formation d√©di√©e r√©alis√©e", value: "trained", score: 0 },
      { label: "Oui, sensibilisation basique", value: "awareness", score: 1 },
      { label: "Non, pas encore", value: "no", score: 3 },
      { label: "L'AI Act n'est pas connu en interne", value: "unknown", score: 4 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 8,
    aiActArticle: "Article 4 - Ma√Ætrise de l'IA",
  },
  {
    id: "training_article4_compliance",
    category: "training",
    subcategory: "Obligation l√©gale",
    question: "√ätes-vous conforme √† l'Article 4 de l'AI Act (obligation de formation) ?",
    description: "L'Article 4 impose que les personnes utilisant des syst√®mes IA aient un niveau suffisant de ma√Ætrise.",
    type: "single",
    options: [
      { label: "Oui, plan de formation d√©ploy√©", value: "compliant", score: 0 },
      { label: "En cours de mise en conformit√©", value: "in_progress", score: 2 },
      { label: "Non, pas encore commenc√©", value: "no", score: 3 },
      { label: "Je ne connaissais pas cette obligation", value: "unknown", score: 4 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 9,
    aiActArticle: "Article 4",
  },
  {
    id: "training_plan_exists",
    category: "training",
    subcategory: "Plan de formation",
    question: "Avez-vous un plan de formation IA formalis√© ?",
    type: "single",
    options: [
      { label: "Oui, plan annuel avec budget", value: "formal", score: 0 },
      { label: "Oui, formations ponctuelles", value: "occasional", score: 2 },
      { label: "Non", value: "no", score: 3 },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 6,
    collectData: "hasTrainingPlan",
  },
  {
    id: "training_target_audiences",
    category: "training",
    subcategory: "Plan de formation",
    question: "Quelles populations sont form√©es √† l'IA ?",
    type: "multiple",
    options: [
      { label: "Direction / COMEX", value: "executive", score: 0 },
      { label: "Managers", value: "managers", score: 0 },
      { label: "√âquipes IT / Data", value: "tech", score: 0 },
      { label: "Utilisateurs m√©tiers", value: "business", score: 0 },
      { label: "√âquipes juridiques / conformit√©", value: "legal", score: 0 },
      { label: "Nouveaux arrivants (onboarding)", value: "onboarding", score: 0 },
    ],
    required: false,
    forPlans: ["pro", "enterprise"],
    weight: 5,
    collectData: "trainedAudiences",
  },
  {
    id: "training_certification",
    category: "training",
    subcategory: "Certification",
    question: "Des collaborateurs ont-ils une certification IA ou AI Act ?",
    type: "single",
    options: [
      { label: "Oui, plusieurs personnes certifi√©es", value: "multiple", score: 0 },
      { label: "Oui, quelques personnes", value: "few", score: 1 },
      { label: "Non, mais pr√©vu", value: "planned", score: 2 },
      { label: "Non", value: "no", score: 3 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 5,
  },
  {
    id: "training_high_risk_operators",
    category: "training",
    subcategory: "Op√©rateurs",
    question: "Les op√©rateurs de vos syst√®mes √† haut risque sont-ils sp√©cifiquement form√©s ?",
    type: "single",
    options: [
      { label: "Oui, formation sp√©cifique obligatoire", value: "mandatory", score: 0 },
      { label: "Oui, formation recommand√©e", value: "recommended", score: 1 },
      { label: "Non", value: "no", score: 3 },
      { label: "Pas de syst√®me √† haut risque", value: "not_applicable", score: 0 },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 7,
    aiActArticle: "Article 26(7)",
  },
  {
    id: "training_refresh",
    category: "training",
    subcategory: "Mise √† jour",
    question: "Les formations IA sont-elles mises √† jour r√©guli√®rement ?",
    type: "single",
    options: [
      { label: "Oui, mise √† jour annuelle ou plus fr√©quente", value: "annual", score: 0 },
      { label: "Oui, ponctuellement", value: "occasional", score: 1 },
      { label: "Non, formations fig√©es", value: "no", score: 3 },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 4,
  },

  // ============================================
  // GESTION DES DONN√âES (12 questions)
  // ============================================
  {
    id: "data_quality_process",
    category: "data_management",
    subcategory: "Qualit√©",
    question: "Avez-vous un processus de contr√¥le qualit√© des donn√©es utilis√©es par vos IA ?",
    type: "single",
    options: [
      { label: "Oui, processus formalis√©", value: "formal", score: 0 },
      { label: "Oui, contr√¥les ponctuels", value: "occasional", score: 2 },
      { label: "Non", value: "no", score: 4 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 7,
    aiActArticle: "Article 10",
  },
  {
    id: "data_representativeness",
    category: "data_management",
    subcategory: "Qualit√©",
    question: "V√©rifiez-vous la repr√©sentativit√© des donn√©es d'entra√Ænement ?",
    type: "single",
    options: [
      { label: "Oui, analyse syst√©matique", value: "systematic", score: 0 },
      { label: "Oui, pour certains syst√®mes", value: "partial", score: 2 },
      { label: "Non", value: "no", score: 3 },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 6,
    aiActArticle: "Article 10(3)",
  },
  {
    id: "data_gdpr_compliance",
    category: "data_management",
    subcategory: "RGPD",
    question: "Vos traitements IA sont-ils conformes au RGPD ?",
    type: "single",
    options: [
      { label: "Oui, conformit√© v√©rifi√©e et document√©e", value: "verified", score: 0 },
      { label: "Oui, nous pensons √™tre conformes", value: "assumed", score: 1 },
      { label: "Partiellement", value: "partial", score: 3 },
      { label: "Non / Je ne sais pas", value: "no", score: 4 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 8,
  },
  {
    id: "data_pia",
    category: "data_management",
    subcategory: "RGPD",
    question: "Avez-vous r√©alis√© des analyses d'impact (PIA/AIPD) pour vos syst√®mes IA ?",
    type: "single",
    options: [
      { label: "Oui, pour tous les syst√®mes concern√©s", value: "all", score: 0 },
      { label: "Oui, pour certains syst√®mes", value: "some", score: 2 },
      { label: "Non", value: "no", score: 3 },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 7,
  },
  {
    id: "data_retention",
    category: "data_management",
    subcategory: "Conservation",
    question: "Avez-vous d√©fini des dur√©es de conservation pour les donn√©es IA ?",
    type: "single",
    options: [
      { label: "Oui, politique de r√©tention formalis√©e", value: "formal", score: 0 },
      { label: "Oui, dur√©es d√©finies au cas par cas", value: "adhoc", score: 1 },
      { label: "Non", value: "no", score: 3 },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 5,
  },
  {
    id: "data_lineage",
    category: "data_management",
    subcategory: "Tra√ßabilit√©",
    question: "√ätes-vous capable de tracer l'origine des donn√©es utilis√©es par vos IA ?",
    type: "single",
    options: [
      { label: "Oui, data lineage complet", value: "complete", score: 0 },
      { label: "Oui, partiellement", value: "partial", score: 2 },
      { label: "Non", value: "no", score: 3 },
    ],
    required: true,
    forPlans: ["enterprise"],
    weight: 6,
    aiActArticle: "Article 10(2)",
  },

  // ============================================
  // TRANSPARENCE (10 questions)
  // ============================================
  {
    id: "transparency_disclosure",
    category: "transparency",
    subcategory: "Information",
    question: "Informez-vous les utilisateurs qu'ils interagissent avec un syst√®me IA ?",
    type: "single",
    options: [
      { label: "Oui, syst√©matiquement et clairement", value: "always", score: 0 },
      { label: "Oui, dans certains cas", value: "sometimes", score: 2 },
      { label: "Non", value: "no", score: 4 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 8,
    aiActArticle: "Article 50 - Transparence",
  },
  {
    id: "transparency_chatbot",
    category: "transparency",
    subcategory: "Information",
    question: "Vos chatbots ou assistants virtuels s'identifient-ils comme √©tant des IA ?",
    type: "single",
    options: [
      { label: "Oui, identification claire", value: "clear", score: 0 },
      { label: "Partiellement", value: "partial", score: 2 },
      { label: "Non", value: "no", score: 4 },
      { label: "Pas de chatbot", value: "not_applicable", score: 0 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 7,
    aiActArticle: "Article 50(1)",
  },
  {
    id: "transparency_synthetic_content",
    category: "transparency",
    subcategory: "Contenu g√©n√©r√©",
    question: "Marquez-vous le contenu g√©n√©r√© par IA (textes, images, vid√©os) ?",
    type: "single",
    options: [
      { label: "Oui, marquage syst√©matique", value: "always", score: 0 },
      { label: "Oui, parfois", value: "sometimes", score: 2 },
      { label: "Non", value: "no", score: 3 },
      { label: "Pas de contenu g√©n√©r√© par IA", value: "not_applicable", score: 0 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 6,
    aiActArticle: "Article 50(2)",
  },
  {
    id: "transparency_decisions",
    category: "transparency",
    subcategory: "D√©cisions",
    question: "Expliquez-vous les d√©cisions prises par vos syst√®mes IA aux personnes concern√©es ?",
    type: "single",
    options: [
      { label: "Oui, explications syst√©matiques", value: "always", score: 0 },
      { label: "Oui, sur demande", value: "on_request", score: 1 },
      { label: "Non", value: "no", score: 3 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 7,
  },
  {
    id: "transparency_privacy_policy",
    category: "transparency",
    subcategory: "Documentation",
    question: "Votre politique de confidentialit√© mentionne-t-elle l'utilisation de l'IA ?",
    type: "single",
    options: [
      { label: "Oui, section d√©di√©e", value: "dedicated", score: 0 },
      { label: "Oui, mention g√©n√©rale", value: "general", score: 1 },
      { label: "Non", value: "no", score: 3 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 5,
  },
  {
    id: "transparency_cgv",
    category: "transparency",
    subcategory: "Documentation",
    question: "Vos CGU/CGV mentionnent-elles l'utilisation de syst√®mes IA ?",
    type: "single",
    options: [
      { label: "Oui, clauses sp√©cifiques IA", value: "specific", score: 0 },
      { label: "Non", value: "no", score: 2 },
      { label: "Pas de CGU/CGV", value: "not_applicable", score: 1 },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 4,
  },

  // ============================================
  // SUPERVISION HUMAINE (10 questions)
  // ============================================
  {
    id: "human_oversight_policy",
    category: "human_oversight",
    subcategory: "Politique",
    question: "Avez-vous d√©fini une politique de supervision humaine pour vos syst√®mes IA ?",
    type: "single",
    options: [
      { label: "Oui, politique formalis√©e", value: "formal", score: 0 },
      { label: "Oui, r√®gles informelles", value: "informal", score: 2 },
      { label: "Non", value: "no", score: 4 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 8,
    aiActArticle: "Article 14 - Contr√¥le humain",
  },
  {
    id: "human_oversight_high_risk",
    category: "human_oversight",
    subcategory: "Haut risque",
    question: "Vos syst√®mes √† haut risque permettent-ils une intervention humaine ?",
    type: "single",
    options: [
      { label: "Oui, intervention possible √† tout moment", value: "always", score: 0 },
      { label: "Oui, mais limit√©e", value: "limited", score: 2 },
      { label: "Non", value: "no", score: 4 },
      { label: "Pas de syst√®me √† haut risque", value: "not_applicable", score: 0 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 9,
    aiActArticle: "Article 14(2)",
  },
  {
    id: "human_override",
    category: "human_oversight",
    subcategory: "Capacit√©",
    question: "Les op√©rateurs peuvent-ils annuler ou corriger les d√©cisions IA ?",
    type: "single",
    options: [
      { label: "Oui, facilement", value: "easy", score: 0 },
      { label: "Oui, mais processus complexe", value: "complex", score: 2 },
      { label: "Non", value: "no", score: 4 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 8,
    aiActArticle: "Article 14(4)(d)",
  },
  {
    id: "human_stop_button",
    category: "human_oversight",
    subcategory: "Capacit√©",
    question: "Existe-t-il un m√©canisme d'arr√™t d'urgence pour vos syst√®mes IA critiques ?",
    type: "single",
    options: [
      { label: "Oui, bouton d'arr√™t accessible", value: "accessible", score: 0 },
      { label: "Oui, mais proc√©dure complexe", value: "complex", score: 2 },
      { label: "Non", value: "no", score: 4 },
      { label: "Pas de syst√®me critique", value: "not_applicable", score: 0 },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 7,
    aiActArticle: "Article 14(4)(e)",
  },
  {
    id: "human_automation_bias",
    category: "human_oversight",
    subcategory: "Formation",
    question: "Vos √©quipes sont-elles form√©es au risque de biais d'automatisation ?",
    description: "Tendance √† faire confiance aveugl√©ment aux d√©cisions de l'IA.",
    type: "single",
    options: [
      { label: "Oui, formation sp√©cifique", value: "trained", score: 0 },
      { label: "Oui, sensibilisation basique", value: "awareness", score: 1 },
      { label: "Non", value: "no", score: 3 },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 6,
    aiActArticle: "Article 14(4)(b)",
  },

  // ============================================
  // S√âCURIT√â (10 questions)
  // ============================================
  {
    id: "security_risk_assessment",
    category: "security",
    subcategory: "√âvaluation",
    question: "Avez-vous r√©alis√© une √©valuation des risques de s√©curit√© de vos syst√®mes IA ?",
    type: "single",
    options: [
      { label: "Oui, √©valuation formelle", value: "formal", score: 0 },
      { label: "Oui, √©valuation informelle", value: "informal", score: 2 },
      { label: "Non", value: "no", score: 4 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 8,
    aiActArticle: "Article 9 - Gestion des risques",
  },
  {
    id: "security_adversarial",
    category: "security",
    subcategory: "Robustesse",
    question: "Avez-vous test√© la robustesse de vos IA face aux attaques adversariales ?",
    description: "Tentatives de manipulation des entr√©es pour tromper le mod√®le.",
    type: "single",
    options: [
      { label: "Oui, tests r√©guliers", value: "regular", score: 0 },
      { label: "Oui, tests ponctuels", value: "occasional", score: 2 },
      { label: "Non", value: "no", score: 3 },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 6,
    aiActArticle: "Article 15(4)",
  },
  {
    id: "security_data_poisoning",
    category: "security",
    subcategory: "Robustesse",
    question: "Avez-vous des mesures contre l'empoisonnement des donn√©es ?",
    type: "single",
    options: [
      { label: "Oui, mesures en place", value: "yes", score: 0 },
      { label: "Partiellement", value: "partial", score: 2 },
      { label: "Non", value: "no", score: 3 },
    ],
    required: true,
    forPlans: ["enterprise"],
    weight: 5,
    aiActArticle: "Article 15(4)",
  },
  {
    id: "security_access_control",
    category: "security",
    subcategory: "Acc√®s",
    question: "Les acc√®s √† vos syst√®mes IA sont-ils contr√¥l√©s et trac√©s ?",
    type: "single",
    options: [
      { label: "Oui, contr√¥le strict avec logs", value: "strict", score: 0 },
      { label: "Oui, contr√¥le basique", value: "basic", score: 1 },
      { label: "Non", value: "no", score: 3 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 6,
  },
  {
    id: "security_incident_process",
    category: "security",
    subcategory: "Incidents",
    question: "Avez-vous un processus de gestion des incidents IA ?",
    type: "single",
    options: [
      { label: "Oui, processus formalis√©", value: "formal", score: 0 },
      { label: "Oui, g√©r√© au cas par cas", value: "adhoc", score: 2 },
      { label: "Non", value: "no", score: 3 },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 7,
    aiActArticle: "Article 72 - Signalement",
  },
  {
    id: "security_incident_reporting",
    category: "security",
    subcategory: "Incidents",
    question: "Savez-vous √† qui signaler un incident grave li√© √† l'IA ?",
    type: "single",
    options: [
      { label: "Oui, autorit√©s identifi√©es et processus clair", value: "clear", score: 0 },
      { label: "Oui, mais processus flou", value: "unclear", score: 2 },
      { label: "Non", value: "no", score: 3 },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 5,
    aiActArticle: "Article 73",
  },

  // ============================================
  // PROCESSUS DE CONFORMIT√â (10 questions)
  // ============================================
  {
    id: "compliance_roadmap",
    category: "compliance_process",
    subcategory: "Planification",
    question: "Avez-vous √©tabli une roadmap de mise en conformit√© AI Act ?",
    type: "single",
    options: [
      { label: "Oui, roadmap d√©taill√©e avec jalons", value: "detailed", score: 0 },
      { label: "Oui, plan global", value: "global", score: 1 },
      { label: "Non, mais pr√©vu", value: "planned", score: 2 },
      { label: "Non", value: "no", score: 4 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 8,
    collectData: "hasRoadmap",
  },
  {
    id: "compliance_deadline_awareness",
    category: "compliance_process",
    subcategory: "Planification",
    question: "Connaissez-vous les √©ch√©ances de l'AI Act ?",
    description: "F√©vrier 2025 (pratiques interdites), Ao√ªt 2025 (GPAI), Ao√ªt 2026 (haut risque)...",
    type: "single",
    options: [
      { label: "Oui, √©ch√©ances int√©gr√©es dans notre planning", value: "integrated", score: 0 },
      { label: "Oui, connaissance g√©n√©rale", value: "general", score: 1 },
      { label: "Non, je d√©couvre", value: "no", score: 3 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 7,
  },
  {
    id: "compliance_external_help",
    category: "compliance_process",
    subcategory: "Ressources",
    question: "Faites-vous appel √† une aide externe pour la conformit√© AI Act ?",
    type: "single",
    options: [
      { label: "Oui, cabinet sp√©cialis√© IA/tech", value: "specialized", score: 0 },
      { label: "Oui, cabinet juridique g√©n√©raliste", value: "legal", score: 1 },
      { label: "Non, tout en interne", value: "internal", score: 2 },
      { label: "Non, pas encore commenc√©", value: "no", score: 3 },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 4,
  },
  {
    id: "compliance_register",
    category: "compliance_process",
    subcategory: "Documentation",
    question: "Tenez-vous un registre des syst√®mes IA conforme √† l'AI Act ?",
    type: "single",
    options: [
      { label: "Oui, registre complet", value: "complete", score: 0 },
      { label: "Oui, registre partiel", value: "partial", score: 2 },
      { label: "Non", value: "no", score: 4 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 8,
    aiActArticle: "Article 49 - Registre",
    collectData: "hasRegister",
  },
  {
    id: "compliance_eu_database",
    category: "compliance_process",
    subcategory: "Enregistrement",
    question: "Avez-vous pr√©vu d'enregistrer vos syst√®mes √† haut risque dans la base UE ?",
    type: "single",
    options: [
      { label: "Oui, processus en place", value: "yes", score: 0 },
      { label: "Oui, pr√©vu", value: "planned", score: 1 },
      { label: "Non, je ne connaissais pas cette obligation", value: "unknown", score: 3 },
      { label: "Non applicable (pas de syst√®me √† haut risque)", value: "not_applicable", score: 0 },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 6,
    aiActArticle: "Article 71",
  },
  {
    id: "compliance_internal_audit",
    category: "compliance_process",
    subcategory: "Contr√¥le",
    question: "R√©alisez-vous des audits internes de conformit√© IA ?",
    type: "single",
    options: [
      { label: "Oui, audits r√©guliers programm√©s", value: "regular", score: 0 },
      { label: "Oui, ponctuellement", value: "occasional", score: 2 },
      { label: "Non", value: "no", score: 3 },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 5,
  },
  {
    id: "compliance_ce_marking",
    category: "compliance_process",
    subcategory: "Certification",
    question: "Connaissez-vous les exigences de marquage CE pour les syst√®mes IA √† haut risque ?",
    type: "single",
    options: [
      { label: "Oui, processus de certification en place", value: "process", score: 0 },
      { label: "Oui, connaissance th√©orique", value: "theory", score: 1 },
      { label: "Non", value: "no", score: 2 },
      { label: "Non applicable", value: "not_applicable", score: 0 },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 5,
    aiActArticle: "Article 48 - Marquage CE",
  },

  // ============================================
  // FOURNISSEURS (10 questions)
  // ============================================
  {
    id: "suppliers_ai_inventory",
    category: "suppliers",
    subcategory: "Inventaire",
    question: "Avez-vous identifi√© tous vos fournisseurs de solutions IA ?",
    type: "single",
    options: [
      { label: "Oui, liste compl√®te et √† jour", value: "complete", score: 0 },
      { label: "Oui, liste partielle", value: "partial", score: 2 },
      { label: "Non", value: "no", score: 3 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 6,
    collectData: "hasSuppliersList",
  },
  {
    id: "suppliers_contract_review",
    category: "suppliers",
    subcategory: "Contrats",
    question: "Vos contrats fournisseurs incluent-ils des clauses AI Act ?",
    type: "single",
    options: [
      { label: "Oui, clauses sp√©cifiques n√©goci√©es", value: "specific", score: 0 },
      { label: "Non, mais pr√©vu lors des renouvellements", value: "planned", score: 2 },
      { label: "Non", value: "no", score: 3 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 7,
    aiActArticle: "Article 25 - Cha√Æne de valeur",
  },
  {
    id: "suppliers_documentation",
    category: "suppliers",
    subcategory: "Documentation",
    question: "Obtenez-vous la documentation technique de vos fournisseurs IA ?",
    type: "single",
    options: [
      { label: "Oui, documentation compl√®te re√ßue", value: "complete", score: 0 },
      { label: "Oui, documentation partielle", value: "partial", score: 2 },
      { label: "Non, pas demand√©e ou refus√©e", value: "no", score: 4 },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 6,
    aiActArticle: "Article 13",
  },
  {
    id: "suppliers_compliance_check",
    category: "suppliers",
    subcategory: "V√©rification",
    question: "V√©rifiez-vous la conformit√© AI Act de vos fournisseurs ?",
    type: "single",
    options: [
      { label: "Oui, v√©rification syst√©matique", value: "systematic", score: 0 },
      { label: "Oui, pour les principaux fournisseurs", value: "main", score: 1 },
      { label: "Non", value: "no", score: 3 },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 6,
  },
  {
    id: "suppliers_gpai_providers",
    category: "suppliers",
    subcategory: "GPAI",
    question: "Utilisez-vous des mod√®les d'IA √† usage g√©n√©ral (GPAI) de fournisseurs tiers ?",
    description: "Ex: API OpenAI, Claude, Gemini, Llama, Mistral...",
    type: "single",
    options: [
      { label: "Oui, plusieurs fournisseurs", value: "multiple", score: 2 },
      { label: "Oui, un fournisseur principal", value: "one", score: 1 },
      { label: "Non", value: "no", score: 0 },
    ],
    required: true,
    forPlans: ["starter", "pro", "enterprise"],
    weight: 5,
    aiActArticle: "Article 51-56 - GPAI",
    collectData: "gpaiProviders",
  },
  {
    id: "suppliers_liability",
    category: "suppliers",
    subcategory: "Responsabilit√©",
    question: "Avez-vous clarifi√© la r√©partition des responsabilit√©s avec vos fournisseurs IA ?",
    type: "single",
    options: [
      { label: "Oui, responsabilit√©s d√©finies contractuellement", value: "defined", score: 0 },
      { label: "Partiellement", value: "partial", score: 2 },
      { label: "Non", value: "no", score: 3 },
    ],
    required: true,
    forPlans: ["pro", "enterprise"],
    weight: 6,
    aiActArticle: "Article 25",
  },
];

// Fonction pour obtenir les questions filtr√©es
export function getFilteredQuestions(
  plan: "starter" | "pro" | "enterprise",
  sector?: string,
  size?: string,
  previousAnswers?: Record<string, string | string[]>
): Question[] {
  return QUESTIONS.filter((q) => {
    // Filtre par plan
    if (!q.forPlans.includes(plan)) return false;
    
    // Filtre par secteur
    if (q.forSectors && q.forSectors.length > 0 && sector) {
      if (!q.forSectors.includes(sector)) return false;
    }
    
    // Filtre par taille
    if (q.forSizes && q.forSizes.length > 0 && size) {
      if (!q.forSizes.includes(size)) return false;
    }
    
    // Filtre par conditions (questions pr√©c√©dentes)
    if (q.conditions && previousAnswers) {
      for (const condition of q.conditions) {
        const answer = previousAnswers[condition.questionId];
        if (!answer) return false;
        
        if (Array.isArray(answer)) {
          if (!condition.values.some(v => answer.includes(v))) return false;
        } else {
          if (!condition.values.includes(answer)) return false;
        }
      }
    }
    
    return true;
  });
}

// Nombre de questions par plan
export const QUESTIONS_COUNT = {
  starter: QUESTIONS.filter(q => q.forPlans.includes("starter")).length,
  pro: QUESTIONS.filter(q => q.forPlans.includes("pro")).length,
  enterprise: QUESTIONS.filter(q => q.forPlans.includes("enterprise")).length,
};
